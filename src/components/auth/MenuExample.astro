---
/**
 * Example usage of the PermissionMenu component
 *
 * This demonstrates how to configure and use the permission-aware menu
 * with various permission requirements and nested menu structures.
 */

import PermissionMenu from './PermissionMenu.astro';
import type { MenuItem } from '@/types/auth';

// Example menu configuration with permission requirements
const menuItems: MenuItem[] = [
	{
		label: 'Home',
		href: '/',
		// No permissions required - visible to all authenticated users
	},
	{
		label: 'Content',
		href: '/content',
		permissions: ['write_content', 'edit_content'], // Visible to editors and admins
		children: [
			{
				label: 'Create New',
				href: '/content/create',
				permissions: ['write_content'],
			},
			{
				label: 'Edit Existing',
				href: '/content/edit',
				permissions: ['edit_content'],
			},
			{
				label: 'View All',
				href: '/content/list',
				permissions: ['write_content', 'edit_content'],
			},
		],
	},
	{
		label: 'Administration',
		href: '/a',
		permissions: ['manage_user'], // Admin only
		children: [
			{
				label: 'User Management',
				href: '/a/users',
				permissions: ['manage_user'],
			},
			{
				label: 'System Settings',
				href: '/a/settings',
				permissions: ['manage_user'],
			},
		],
	},
	{
		label: 'Profile',
		href: '/profile',
		// No permissions required - visible to all authenticated users
	},
];
---

<div class="border p-4 bg-foreground/5">
	<h3 class="mt-0 mb-4 text-lg font-medium">Navigation Menu</h3>
	<div class="bg-foreground/10 rounded shadow-sm">
		<PermissionMenu items={menuItems} className="main-navigation" />
	</div>
</div>
